<ng-container *ngIf="userData && unit">
  <owge-widgets-display-list-item (timeOver)="onBuildDone(building.missionData.unit)" [itemName]="unit.name" [itemDescription]="unit.description" [image]="image" [hideDesktopSections]="[0,0, isCompactView]">
    <ng-template owgeCoreContent select="extra-section">
      <a class="btn" (click)="selectedView = 'requirements'"
      [ngClass]="{ 'selected-menu': selectedView === 'requirements'}">Requirements</a>
      <a class="btn" (click)="selectedView = 'attributes'"
        [ngClass]="{ 'selected-menu': selectedView === 'attributes'}">Attributes</a>
      <app-display-requirements *ngIf="selectedView === 'requirements'" [requirements]="unit.requirements">
      </app-display-requirements>
      <ng-container *ngIf="selectedView === 'attributes'">
        <owge-widgets-display-improved-attribute *ngIf="unit.health" [name]="'Health'" [value]="unit.health"
          [assetsImage]="true" [image]="'hearth.png'" [improvementPercentage]="moreHealth"></owge-widgets-display-improved-attribute>
        <owge-widgets-display-improved-attribute *ngIf="unit.shield" [name]="'Shield'" [value]="unit.shield"
          [assetsImage]="true" [image]="'shield.png'" [improvementPercentage]="moreShield"></owge-widgets-display-improved-attribute>
        <owge-widgets-display-improved-attribute *ngIf="unit.attack" [name]="'Attack'" [value]="unit.attack"
          [assetsImage]="true" [image]="'sword.png'" [improvementPercentage]="moreAttack"></owge-widgets-display-improved-attribute>
        <owge-widgets-display-improved-attribute *ngIf="unit.charge" [name]="'Charge'" [value]="unit.charge"
          [assetsImage]="true" [image]="'carry.png'" [improvementPercentage]="moreCharge"></owge-widgets-display-improved-attribute>
      </ng-container>
    </ng-template>
    
    <ng-template owgeCoreContent select="action-buttons">
      <ng-container *ngIf="withBuildMode">
        <a *ngIf="building && building.missionData.unit.id !== unit.id" class="btn btn-block" role="button"
          (click)="otherUnitAlreadyRunning()">---</a>
        <ng-container *ngIf="!building">
          <input type="number" id="count" name="count" [(ngModel)]="count" placeholder="Cantidad" />
          <a *ngIf="canBuild() && isValidCount() && count >= 1" class="btn btn-block" role="button"
            (click)="buildSelectedUnit()">Construir</a>
          <a *ngIf="canBuild() && count && !isValidCount()" class="btn btn-block" role="button" (click)="count = 1">Máximo 1
            =/
          </a>
          <a *ngIf="!count" class="btn btn-block" role="button" (click)="count = 1">Mínimo 1
          </a>
          <a *ngIf="!canBuild()" class="btn btn-block" role="button" (click)="noResources()">Sin recursos</a>
        </ng-container>
      </ng-container>
    
      <ng-container *ngIf="withInPlanetMode">
        <ng-template owgeCoreIfDesktop>
          <div class="in-planet-count">
            <h5>{{ 'APP.UNITS.NUMBER' | translate }}:</h5>
            <h5> {{ inPlanetCount }}</h5>
          </div>
        </ng-template>
        <input class="number-to-delete" type="number" [(ngModel)]="numberToDelete" placeholder="Delete" [min]="0"
          [max]="inPlanetCount" />
        <a class="btn delete" [ngClass]="{ 'disabled': !isValidDeletion()}" (click)="deleteUnits()">Delete</a>
      </ng-container>
    </ng-template>

    <ng-template owgeCoreContent select="image-container-prepend">
      <ng-template owgeCoreIfDesktop [negate]="true">
        <div class="in-planet-count-mobile">{{ inPlanetCount }}</div>
      </ng-template>
    </ng-template>
  </owge-widgets-display-list-item> 
</ng-container>