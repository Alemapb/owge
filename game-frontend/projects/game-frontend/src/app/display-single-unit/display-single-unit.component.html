<ng-container *ngIf="userData && unit && unitTypes">
  <owge-widgets-display-list-item [itemName]="unit.name" [itemDescription]="unit.description" 
    [image]="unit.imageUrl" [hideDesktopSections]="[0,0, isCompactView]"
    [hasToDisplayCountdown]="building && building.unit.id === unit.id && building.pendingMillis"
    [countdownDate]="building && building.browserComputedTerminationDate"
  >
    <ng-template owgeCoreContent select="extra-section">
      <a class="btn" (click)="selectedView = 'requirements'"
    [ngClass]="{ 'selected-menu': selectedView === 'requirements'}">{{ 'APP.UNITS.DISPLAY_SINGLE.REQUIREMENTS' | translate }}</a>
      <a class="btn" (click)="selectedView = 'attributes'"
        [ngClass]="{ 'selected-menu': selectedView === 'attributes'}">{{ 'APP.UNITS.DISPLAY_SINGLE.ATTRIBUTES' | translate }}</a>
      <app-display-requirements *ngIf="selectedView === 'requirements'" [requirements]="unit.requirements">
      </app-display-requirements>
      <ng-container *ngIf="selectedView === 'attributes'">
        <owge-widgets-display-improved-attribute *ngIf="unit.health" [name]="'Health'" [value]="unit.health"
          [assetsImage]="true" [image]="'hearth.png'" [improvementPercentage]="moreHealth"></owge-widgets-display-improved-attribute>
        <owge-widgets-display-improved-attribute *ngIf="unit.shield" [name]="'Shield'" [value]="unit.shield"
          [assetsImage]="true" [image]="'shield.png'" [improvementPercentage]="moreShield"></owge-widgets-display-improved-attribute>
        <owge-widgets-display-improved-attribute *ngIf="unit.attack" [name]="'Attack'" [value]="unit.attack"
          [assetsImage]="true" [image]="'sword.png'" [improvementPercentage]="moreAttack"></owge-widgets-display-improved-attribute>
        <owge-widgets-display-improved-attribute *ngIf="unit.charge" [name]="'Charge'" [value]="unit.charge"
          [assetsImage]="true" [image]="'carry.png'" [improvementPercentage]="moreCharge"></owge-widgets-display-improved-attribute>
      </ng-container>
    </ng-template>
    
    <ng-template owgeCoreContent select="action-buttons">
      <ng-container *ngIf="withBuildMode">
        <a class="btn btn-block" *ngIf="building && building.unit.id === unit.id" role="button" (click)="cancelUnit()">{{ 'APP.UNITS.DISPLAY_SINGLE.BUILD.CANCEL' | translate }}</a>
        <a *ngIf="building && building.unit.id !== unit.id" class="btn btn-block" role="button"
          (click)="otherUnitAlreadyRunning()">---</a>
        <ng-container *ngIf="!building">
          <input type="number" id="count" name="count" [(ngModel)]="count" [placeholder]="'APP.UNITS.DISPLAY_SINGLE.BUILD.COUNT' | translate" min="0" />
          <a *ngIf="canBuild() && isValidCount() && count >= 1" class="btn btn-block" role="button"
            (click)="buildSelectedUnit()">{{ 'APP.UNITS.DISPLAY_SINGLE.BUILD.BTN_BUILD' | translate }}</a>
          <a *ngIf="canBuild() && count && !isValidCount()" class="btn btn-block" role="button" (click)="count = 1">Error (report it!)</a>
          <a *ngIf="!count" class="btn btn-block" role="button" (click)="count = 1">{{ 'APP.UNITS.DISPLAY_SINGLE.MIN_ONE' | translate }}</a>
          <a *ngIf="!canBuild()" class="btn btn-block" role="button" (click)="noResources()">{{ 'APP.UNITS.DISPLAY_SINGLE.BUILD.NO_RESOURCES' | translate }}</a>
        </ng-container>
      </ng-container>
    
      <ng-container *ngIf="withInPlanetMode">
        <ng-template owgeCoreIfDesktop>
          <div class="in-planet-count">
            <h5>{{ 'APP.UNITS.DISPLAY_SINGLE.NUMBER' | translate }}:</h5>
            <h5> {{ inPlanetCount }}</h5>
          </div>
        </ng-template>
        <input class="number-to-delete" type="number" [(ngModel)]="numberToDelete" [placeholder]="'APP.UNITS.DISPLAY_SINGLE.DELETE' | translate" [min]="0"
          [max]="inPlanetCount" />
        <a class="btn delete" [ngClass]="{ 'disabled': !isValidDeletion()}" (click)="deleteUnits()">{{ 'APP.UNITS.DISPLAY_SINGLE.DELETE' | translate }}</a>
      </ng-container>
    </ng-template>

    <ng-template owgeCoreContent select="image-container-prepend">
      <ng-template owgeCoreIfDesktop [negate]="true">
        <div class="in-planet-count-mobile">{{ inPlanetCount }}</div>
      </ng-template>
    </ng-template>
  </owge-widgets-display-list-item> 
</ng-container>